---
published: true
date: '2023-08-06 10:23 +0800'
title: Using inter-as-nimo for merging plan files
author: Fung Lim
excerpt: 'This tutorial demonstrates the use of the inter-as-nimo to merge plan files '
---
## Introduction

Plan files from different Autonomous Systems (AS) can be merged using the inter-as-nimo. The inter-as-nimo resolves any conflicts across the plan files. Plan files in native format are supported.

In addition, inter-as-nimo may be used to merge plan files from the same AS. Use cases could include network regions that needs to be collected via different methods (e.g. topo-igp-nimo in one region, and topo-bgpls-xtc-nimo in another region). 

Note: WAE does not support the collection of multiple basic networks on the same server. If multiple basic networks need to be collected concurrently, they will require separate WAE server instances.

During the merge operation, the following elements will be resolved:

- AS
- Circuits
- Nodes
- Interfaces
- LSPs, LSP hops and Segment List Hops
- Named Paths
- External EndPoints
- External EndPoint Members
- Demands and Demand Traffic

Note that Nodename is used for Node resolution and therefore has to be unique across the network. In addition, plan files having single AS as internal is supported. Plan files with multiple internal AS has not been validated.

## Example

In the following example, we have a topology which requires two methods of collection, topo-igp-nimo for the central region, and topo-bgpls-xtc-nimo for the east region. This results in two separate plan files generated by WAE for the central and east region respectively. WAE Design renders the central and east region as per following figures.

![Central Region]({{site.baseurl}}/images/using-inter-as-nimo-01.png)
![East Region]({{site.baseurl}}/images/using-inter-as-nimo-02.png)

On the WAE server, both plan files are made available on the local filesystem and the inter-as-nimo is configured as follows,

```
set networks network sr_merge nimo inter-as-nimo tag-name tag-name
set networks network sr_merge nimo inter-as-nimo path-to-report-file /home/wae/wae-run/logs/interas-report.log
set networks network sr_merge nimo inter-as-nimo sources sr_topo plan-file-path /home/wae/wae-run/data/networks/sr_topo_igp.db
set networks network sr_merge nimo inter-as-nimo sources sr_topo_east plan-file-path /home/wae/wae-run/data/networks/sr_topo_east.db
```

When the inter-as-nimo is executed, it will result in a merged plan file which is rendered as follows.

![Merged Network]({{site.baseurl}}/images/using-inter-as-nimo-03.png)

For the Multi-AS use case, each AS can be on a different WAE server. The inter-as-nimo may be executed after the demand and traffic collection from each AS. The demand deduction can be run again on top of inter-as-nimo.


